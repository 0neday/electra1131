//
//  removePotentialJailbreak.c
//  electra1131
//
//  Created by Pwn20wnd on 6/24/18.
//  Copyright Â© 2018 Ian Beer. All rights reserved.
//

#include "removePotentialJailbreak.h"
#include <spawn.h>
#include <sys/wait.h>

void removePotentialJailbreak(void) {
    int rv;
    pid_t pd;
    
    rv = posix_spawn(&pd, "/electra/rm", NULL, NULL, (char **)&(const char*[]){ "rm", "-rf", "/jb", NULL }, NULL);
    waitpid(pd, NULL, 0);
    rv = posix_spawn(&pd, "/electra/rm", NULL, NULL, (char **)&(const char*[]){ "rm", "-rf", "/Applications/Filza.app", NULL }, NULL);
    waitpid(pd, NULL, 0);
    rv = posix_spawn(&pd, "/electra/rm", NULL, NULL, (char **)&(const char*[]){ "rm", "-rf", "/etc/dropbear", NULL }, NULL);
    waitpid(pd, NULL, 0);
    
    rv = posix_spawn(&pd, "/electra/rm", NULL, NULL, (char **)&(const char*[]){ "rm", "-rf", "/var/dropbear", NULL }, NULL);
    waitpid(pd, NULL, 0);
    rv = posix_spawn(&pd, "/electra/rm", NULL, NULL, (char **)&(const char*[]){ "rm", "-rf", "/var/profile", NULL }, NULL);
    waitpid(pd, NULL, 0);
    rv = posix_spawn(&pd, "/electra/rm", NULL, NULL, (char **)&(const char*[]){ "rm", "-rf", "/var/motd", NULL }, NULL);
    waitpid(pd, NULL, 0);
}
